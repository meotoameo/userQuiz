<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="Exam.css">
    <title>Header</title>
</head>

<body>


    <div class="header">
        <!-- Nút thoát -->
        <button class="btn"><a href="../Home/home.html">Thoát</a></button>
        <!-- Thời gian làm bài -->
        <div class="time">Thời gian còn lại: <span id="time">60:00</span></div>
        <!-- Nút nộp bài -->
        <button class="btn btn-submit">Nộp bài</button>
    </div>

    <div class="content">
        <!-- Phần nội dung của trang web -->
        <!-- Câu hỏi và đáp án -->
        <div class="question">
            <p>Câu 1: Hợp đồng bảo hiểm vô hiệu khi:</p>
            <div class="answer">
                <label>
                    <input type="radio" name="question1" value="A"> A. Tại thời điểm giao kết hợp đồng bảo hiểm, bên mua
                    bảo hiểm không biết sự kiện bảo hiểm đã xảy ra.
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question1" value="B"> B. Không có đối tượng bảo hiểm tại thời điểm giao
                    kết hợp đồng bảo hiểm.
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question1" value="C"> C. Hợp đồng bảo hiểm được giao kết do bị đe dọa,
                    cưỡng ép.
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question1" value="D"> D. B, C đúng.
                </label>
            </div>
            <input type="hidden" class="question1 correct-answer" value="D">
        </div>
        <div class="question">
            <p>Câu 2: Hợp đồng bảo hiểm thường bao gồm các phần chính sau:</p>
            <div class="answer">
                <label>
                    <input type="radio" name="question2" value="A"> A. Phần điều khoản chính sách.
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question2" value="B"> B. Phần cam kết bảo hiểm.
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question2" value="C"> C. Phần điều khoản loại trừ.
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question2" value="D"> D. Tất cả các phần trên.
                </label>
            </div>
            <input type="hidden" class="question2 correct-answer" value="D">
        </div>
        <!-- Câu hỏi và đáp án tiếp theo -->
        <div class="question">
            <p>Câu 3: [Nội dung của câu hỏi 3 ở đây]</p>
            <div class="answer">
                <label>
                    <input type="radio" name="question3" value="A"> A. [Phương án A cho câu hỏi 3]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question3" value="B"> B. [Phương án B cho câu hỏi 3]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question3" value="C"> C. [Phương án C cho câu hỏi 3]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question3" value="D"> D. [Phương án D cho câu hỏi 3]
                </label>
            </div>
            <input type="hidden" class="question3 correct-answer" value="D">
        </div>
        <div class="question">
            <p>Câu 4: [Nội dung của câu hỏi 4 ở đây]</p>
            <div class="answer">
                <label>
                    <input type="radio" name="question4" value="A"> A. [Phương án A cho câu hỏi 4]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question4" value="B"> B. [Phương án B cho câu hỏi 4]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question4" value="C"> C. [Phương án C cho câu hỏi 4]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question4" value="D"> D. [Phương án D cho câu hỏi 4]
                </label>
            </div>
            <input type="hidden" class="question4 correct-answer" value="D">
        </div>
        <div class="question">
            <p>Câu 5: [Nội dung của câu hỏi 5 ở đây]</p>
            <div class="answer">
                <label>
                    <input type="radio" name="question5" value="A"> A. [Phương án A cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question5" value="B"> B. [Phương án B cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question5" value="C"> C. [Phương án C cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question5" value="D"> D. [Phương án D cho câu hỏi 5]
                </label>
            </div>
            <input type="hidden" class="question5 correct-answer" value="D">
        </div>
        <div class="question">
            <p>Câu 6: [Nội dung của câu hỏi 5 ở đây]</p>
            <div class="answer">
                <label>
                    <input type="radio" name="question6" value="A"> A. [Phương án A cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question6" value="B"> B. [Phương án B cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question6" value="C"> C. [Phương án C cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question6" value="D"> D. [Phương án D cho câu hỏi 5]
                </label>
            </div>
            <input type="hidden" class="question6 correct-answer" value="D">
        </div>
        <div class="question">
            <p>Câu 7: [Nội dung của câu hỏi 5 ở đây]</p>
            <div class="answer">
                <label>
                    <input type="radio" name="question7" value="A"> A. [Phương án A cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question7" value="B"> B. [Phương án B cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question7" value="C"> C. [Phương án C cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question7" value="D"> D. [Phương án D cho câu hỏi 5]
                </label>
            </div>
            <input type="hidden" class="question7 correct-answer" value="D">
        </div>
        <div class="question">
            <p>Câu 8: [Nội dung của câu hỏi 5 ở đây]</p>
            <div class="answer">
                <label>
                    <input type="radio" name="question8" value="A"> A. [Phương án A cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question8" value="B"> B. [Phương án B cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question8" value="C"> C. [Phương án C cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question8" value="D"> D. [Phương án D cho câu hỏi 5]
                </label>
            </div>
            <input type="hidden" class="question8 correct-answer" value="D">
        </div>
        <div class="question">
            <p>Câu 9: [Nội dung của câu hỏi 5 ở đây]</p>
            <div class="answer">
                <label>
                    <input type="radio" name="question9" value="A"> A. [Phương án A cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question9" value="B"> B. [Phương án B cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question9" value="C"> C. [Phương án C cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question9" value="D"> D. [Phương án D cho câu hỏi 5]
                </label>
            </div>
            <input type="hidden" class="question9 correct-answer" value="D">
        </div>
        <div class="question">
            <p>Câu 10: [Nội dung của câu hỏi 5 ở đây]</p>
            <div class="answer">
                <label>
                    <input type="radio" name="question10" value="A"> A. [Phương án A cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question10" value="B"> B. [Phương án B cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question10" value="C"> C. [Phương án C cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question10" value="D"> D. [Phương án D cho câu hỏi 5]
                </label>
            </div>
            <input type="hidden" class="question10 correct-answer" value="D">
        </div>
        <div class="question">
            <p>Câu 11: [Nội dung của câu hỏi 5 ở đây]</p>
            <div class="answer">
                <label>
                    <input type="radio" name="question11" value="A"> A. [Phương án A cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question11" value="B"> B. [Phương án B cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question11" value="C"> C. [Phương án C cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question11" value="D"> D. [Phương án D cho câu hỏi 5]
                </label>
            </div>
            <input type="hidden" class="question11 correct-answer" value="D">
        </div>
        <div class="question">
            <p>Câu 12: [Nội dung của câu hỏi 5 ở đây]</p>
            <div class="answer">
                <label>
                    <input type="radio" name="question12" value="A"> A. [Phương án A cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question12" value="B"> B. [Phương án B cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question12" value="C"> C. [Phương án C cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question12" value="D"> D. [Phương án D cho câu hỏi 5]
                </label>
            </div>
            <input type="hidden" class="question12 correct-answer" value="D">
        </div>
        <div class="question">
            <p>Câu 13: [Nội dung của câu hỏi 5 ở đây]</p>
            <div class="answer">
                <label>
                    <input type="radio" name="question13" value="A"> A. [Phương án A cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question13" value="B"> B. [Phương án B cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question13" value="C"> C. [Phương án C cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question13" value="D"> D. [Phương án D cho câu hỏi 5]
                </label>
            </div>
            <input type="hidden" class="question13 correct-answer" value="D">
        </div>
        <div class="question">
            <p>Câu 14: [Nội dung của câu hỏi 5 ở đây]</p>
            <div class="answer">
                <label>
                    <input type="radio" name="question14" value="A"> A. [Phương án A cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question14" value="B"> B. [Phương án B cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question14" value="C"> C. [Phương án C cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question14" value="D"> D. [Phương án D cho câu hỏi 5]
                </label>
            </div>
            <input type="hidden" class="question14 correct-answer" value="D">
        </div>
        <div class="question">
            <p>Câu 15: [Nội dung của câu hỏi 5 ở đây]</p>
            <div class="answer">
                <label>
                    <input type="radio" name="question15" value="A"> A. [Phương án A cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question15" value="B"> B. [Phương án B cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question15" value="C"> C. [Phương án C cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question15" value="D"> D. [Phương án D cho câu hỏi 5]
                </label>
            </div>
            <input type="hidden" class="question15 correct-answer" value="D">
        </div>
        <div class="question">
            <p>Câu 16: [Nội dung của câu hỏi 5 ở đây]</p>
            <div class="answer">
                <label>
                    <input type="radio" name="question16" value="A"> A. [Phương án A cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question16" value="B"> B. [Phương án B cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question16" value="C"> C. [Phương án C cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question16" value="D"> D. [Phương án D cho câu hỏi 5]
                </label>
            </div>
            <input type="hidden" class="question16 correct-answer" value="D">
        </div>
        <div class="question">
            <p>Câu 17: [Nội dung của câu hỏi 5 ở đây]</p>
            <div class="answer">
                <label>
                    <input type="radio" name="question17" value="A"> A. [Phương án A cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question17" value="B"> B. [Phương án B cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question17" value="C"> C. [Phương án C cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question17" value="D"> D. [Phương án D cho câu hỏi 5]
                </label>
            </div>
            <input type="hidden" class="question17 correct-answer" value="D">
        </div>
        <div class="question">
            <p>Câu 18: [Nội dung của câu hỏi 5 ở đây]</p>
            <div class="answer">
                <label>
                    <input type="radio" name="question18" value="A"> A. [Phương án A cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question18" value="B"> B. [Phương án B cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question18" value="C"> C. [Phương án C cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question18" value="D"> D. [Phương án D cho câu hỏi 5]
                </label>
            </div>
            <input type="hidden" class="question18 correct-answer" value="D">
        </div>
        <div class="question">
            <p>Câu 19: [Nội dung của câu hỏi 5 ở đây]</p>
            <div class="answer">
                <label>
                    <input type="radio" name="question19" value="A"> A. [Phương án A cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question19" value="B"> B. [Phương án B cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question19" value="C"> C. [Phương án C cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question19" value="D"> D. [Phương án D cho câu hỏi 5]
                </label>
            </div>
            <input type="hidden" class="question19 correct-answer" value="D">
        </div>
        <div class="question">
            <p>Câu 20: [Nội dung của câu hỏi 5 ở đây]</p>
            <div class="answer">
                <label>
                    <input type="radio" name="question20" value="A"> A. [Phương án A cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question20" value="B"> B. [Phương án B cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question20" value="C"> C. [Phương án C cho câu hỏi 5]
                </label>
            </div>
            <div class="answer">
                <label>
                    <input type="radio" name="question20" value="D"> D. [Phương án D cho câu hỏi 5]
                </label>
            </div>
        </div>
        <input type="hidden" class="question20 correct-answer" value="D">
    </div>
    <div class="question-buttons">
    </div>
    <div id="scoreModal" class="modal">
        <div class="modal-content">
            <h2 class="test">Bài làm của bạn</h2>
            <p class="p1" id="scoreText"></p>
            <p class="p1" id="correctCount"></p>
            <div class="wrap-return">
                <a href="../Home/home.html" class="return">Về trang chủ</a>
                <button class="return check">Xem đáp án</button>
            </div>
        </div>
    </div>
    <script>
        var timeLeft = 3600; // 60 phút * 60 giây

        function updateTimer() {
            var minutes = Math.floor(timeLeft / 60);
            var seconds = timeLeft % 60;
            document.getElementById("time").innerText = (minutes < 10 ? '0' : '') + minutes + ':' + (seconds < 10 ? '0' : '') + seconds;
            timeLeft--;
            if (timeLeft < 0) {
                clearInterval(timerInterval);
                alert("Hết thời gian!");
                // Thực hiện hành động khi hết thời gian ở đây (ví dụ: tự động nộp bài)
            }
        }
        var timerInterval = setInterval(updateTimer, 1000); // Cập nhật thời gian mỗi giây

        function goToQuestion(questionNumber) {
            var questionElements = document.querySelectorAll('.question');
            var targetQuestion = questionElements[questionNumber - 2];
            targetQuestion.scrollIntoView({ behavior: 'smooth' });
        }
        var questionButtons = document.querySelector('.question-buttons');
        var numberOfQuestions = document.querySelectorAll('.question').length;
        for (var i = 1; i <= numberOfQuestions; i++) {
            var button = document.createElement('button');
            button.innerText = i;
            button.className = 'btn-question';
            button.setAttribute('onclick', 'goToQuestion(' + i + ')');
            button.setAttribute('data-question', 'question' + i); // Thêm thuộc tính dữ liệu để xác định câu hỏi
            questionButtons.appendChild(button);
        }
        // Lắng nghe sự kiện khi một input radio được thay đổi
        document.querySelectorAll('input[type="radio"]').forEach(function (radio) {
            radio.addEventListener('change', function () {
                // Kiểm tra nếu input radio được chọn
                if (this.checked) {
                    // Lấy id của input radio được chọn
                    var questionId = this.getAttribute('name');
                    // Tìm button tương ứng với câu hỏi
                    var button = document.querySelector('button[data-question="' + questionId + '"]');
                    // Thêm lớp CSS hoặc thay đổi màu nền của button
                    button.classList.add('answered');
                }
            });
        });
        function calculateScore() {
            var correctAnswers = document.querySelectorAll('.correct-answer');
            var score = 0;

            correctAnswers.forEach(function (answer) {
                var questionId = answer.className.split(' ')[0]; // Lấy class của câu hỏi
                var selectedAnswer = document.querySelector('input[name="' + questionId + '"]:checked');

                if (selectedAnswer && selectedAnswer.value === answer.value) {
                    score++;

                }
            });

            return score;
        }
        document.querySelectorAll('.answer').forEach(function (answer) {
            answer.addEventListener('click', function () {
                answer.classList.add('selected');
                // Gọi hàm để kiểm tra và bôi đỏ các câu trả lời sai sau khi chọn
            });
        });

        // Hàm để bôi đỏ các câu trả lời sai
        function highlightAnswers() {
            // Lấy danh sách tất cả các câu trả lời từ HTML
            var allAnswers = document.querySelectorAll('.answer');

            // Duyệt qua từng câu trả lời
            allAnswers.forEach(function (answer) {
                var userSelected = answer.classList.contains('selected'); // Kiểm tra xem câu trả lời có được chọn không
                // Kiểm tra nếu câu trả lời đã được chọn nhưng không phải là đáp án đúng, bôi đỏ
                if (userSelected) {
                    answer.style.color = 'red';
                }
            });
        }
        function highlightCorrectAnswers() {
            var correctAnswerValue = document.querySelector('.correct-answer').value;

            var answers = document.querySelectorAll('.answer input[type="radio"]');

            answers.forEach(function (answer) {
                if (answer.value === correctAnswerValue) {
                    // Lấy phần tử cha của input (phần tử có class là "answer")
                    var parentAnswer = answer.closest('.answer');
                    // Thay đổi màu chữ của phần tử cha của câu trả lời đúng sang màu xanh
                    if (parentAnswer) {
                        parentAnswer.style.color = 'blue';
                    }
                }
            });
        }

        document.querySelector('.btn-submit').addEventListener('click', function () {
            var score = calculateScore();
            clearInterval(timerInterval);
            var totalQuestions = document.querySelectorAll('.correct-answer').length;
            var correctCount = document.querySelectorAll('.correct-answer:checked').length;
            var questionbuttons = document.querySelector('.question-buttons')

            questionbuttons.style.display = 'none';
            var scoreText = "Điểm của bạn là: " + score / totalQuestions * 10;
            var correctCountText = "Số câu đúng: " + score + "/" + totalQuestions;

            document.getElementById('scoreText').innerText = scoreText;
            document.getElementById('correctCount').innerText = correctCountText;

            // Hiển thị modal
            var modal = document.getElementById('scoreModal');
            modal.style.display = "block";

            // Đóng modal khi nhấn vào nút đóng
            var closeButton = document.querySelector('.check');
            closeButton.addEventListener('click', function () {
                modal.style.display = "none";
                highlightAnswers();
                highlightCorrectAnswers();
            });

            // Đóng modal khi click ra ngoài
            window.addEventListener('click', function (event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            });
        });
    </script>
</body>

</html>